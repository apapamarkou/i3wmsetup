#!/bin/bash

# Standard YoUNiX Control script template
# Replace SCRIPT_NAME, TITLE, and displayMenu function for each script

MUTE_NOTIFY=false
MUTE_ECHO=false
SCRIPT_NAME=$(basename "$0")
TITLE="TITLE"

showHelp() {
    echo "$DISTRO_NAME $TITLE"
    echo "Usage: $SCRIPT_NAME [OPTIONS]"
    echo "Options:"
    echo "  -t    Open in terminal"
    echo "  -h    Show this help"
    echo "Arguments can be combined: -vn, -nv, etc."
    exit 0
}

openTerminal() {
    nohup flock -n ~/.config/lock/$SCRIPT_NAME.lock terminal --columns=50 --lines=15 --title="$FLOATING_PREFIX $TITLE" $SCRIPT_NAME $args > /dev/null 2>&1 &
}

printMessage() {
    if [ "$MUTE_NOTIFY" = false ]; then
        notify-send "$@"
    fi
    if [ "$MUTE_ECHO" = false ]; then
        echo -e "$@"
    fi
}

displayMenu() {
    # Replace this function with script-specific menu
    while true; do
        clear
        yprint -c --color=yellow "$DISTRO_NAME $TITLE"
        echo "fzf Menu implementation goes here"
        height=$(($(tput lines) - 1))
        choice=$(echo -e "   option 1\n   option 2\n$EXIT_TEX" | fzf \
                --ansi \
                --layout=reverse \
                --prompt="  > " \
                --height=$height)
        case "$choice" in
                *"option 1"*) echo "do the action 1" ;;
                *"option 2"*) echo "do the action 2" ;;
                *) exit 0 ;;
        esac
    done
}

OPEN_TERMINAL=false
EXIT_TEXT="󰈆  Exit"

while getopts "the" opt; do
    case $opt in
        e) EXIT_TEXT="󰌍  Back" ;;
        t) OPEN_TERMINAL=true ;;
        h) showHelp ;;
        \?) echo "Invalid option. Use -h for help."; exit 1 ;;
    esac
done

if [ "$OPEN_TERMINAL" = true ]; then
    openTerminal
    exit 0
fi

displayMenu