#!/usr/bin/env bash

clear

# List of locale variables
LOCALE_VARS=(
    LANG
    LC_CTYPE
    LC_NUMERIC
    LC_TIME
    LC_COLLATE
    LC_MONETARY
    LC_PAPER
    LC_NAME
    LC_ADDRESS
    LC_TELEPHONE
    LC_MEASUREMENT
    LC_IDENTIFICATION
)

# Human-readable mapping
declare -A HUMAN_NAMES=(
    [LANG]="  Default Language"
    [LC_CTYPE]="󰛖  Character Classification"
    [LC_NUMERIC]="  Number Format"
    [LC_TIME]="  Date/Time Format"
    [LC_COLLATE]="󰒼  Sorting Order"
    [LC_MONETARY]="󰇁  Currency Format"
    [LC_PAPER]="󰲏  Paper Sizes"
    [LC_NAME]="  Personal Names Format"
    [LC_ADDRESS]="  Address Format"
    [LC_TELEPHONE]="󰘂  Telephone Format"
    [LC_MEASUREMENT]="󰭍  Measurement Units"
    [LC_IDENTIFICATION]="  Identification Info"
)

# Prepare fzf input: display human-readable name | real variable
MENU_LIST=()
for VAR in "${LOCALE_VARS[@]}"; do
    MENU_LIST+=("${HUMAN_NAMES[$VAR]:-$VAR} | $VAR")
done

# Select which locale variable to change
SELECTION=$(printf "%s\n" "${MENU_LIST[@]}" | fzf --prompt="  Select > " --height=100% --layout=reverse)

# Exit if nothing selected
[[ -z "$SELECTION" ]] && echo "No variable selected." && exit 0

# Extract the real variable name (after the |)
VAR=$(echo "$SELECTION" | awk -F'|' '{print $2}' | xargs)

# Call the previous script with the selected variable
fzf-language-select "$VAR"
