#!/bin/bash

# __   _____  _   _ _   _ _____  __
# \ \ / / _ \| | | | \ | |_ _\ \/ /
#  \ V / | | | | | |  \| || | \  /
#   | || |_| | |_| | |\  || | /  \
#   |_| \___/ \___/|_| \_|___/_/\_\
#
# Lisence GPL3
# Homepage: https://github.com/apapamarkou/younix
# Author: Andrianos Papamarkou
# Email: papamarkoua@gmail.com

# FZF Look Menu for YOUNIX desktop environment

i3config_file=~/.config/i3/config

i3_gaps_menu() {
    choice=$(echo -e "󰎦  Tight (no gaps)\n󰎩  Separated (small gaps)\n󰎬  Loose (large gaps)\n󰌍  Back" | fzf --layout=reverse --prompt="  Gaps > " --height=40%)
    case "$choice" in
        *Tight*) 
            i3-msg "gaps inner all set 0; gaps outer all set 0"  >/dev/null 2>&1 &
            sed -i "s/gaps inner [0-9]*px/gaps inner 0px/" "$HOME/.config/i3/config" ;;
        *Separated*) 
            i3-msg "gaps inner all set 5; gaps outer all set 2"  >/dev/null 2>&1 &
            sed -i "s/gaps inner [0-9]*px/gaps inner 5px/" "$HOME/.config/i3/config" ;;
        *Loose*) 
            i3-msg "gaps inner all set 15; gaps outer all set 5"  >/dev/null 2>&1 &
            sed -i "s/gaps inner [0-9]*px/gaps inner 15px/" "$HOME/.config/i3/config" ;;
    esac
}

i3_borders_menu() {
    choice=$(echo -e "󰎦  Normal\n󰎩  Thin\n󰎬  Thick\n󰌍  Back" | fzf --layout=reverse --prompt="  Borders > " --height=40%)
    case "$choice" in
        *Normal*)   change_borders 2 ;;
        *Thin*)     change_borders 1 ;;
        *Thick*)    change_borders 4  ;;
    esac
    # restart i3wm
    i3-msg reload
}

change_borders() {
    sed -i "s/default_border pixel [0-9]*/default_border pixel $1/" "$i3config_file"
    # restart i3wm
    i3-msg '[class=".*"] border pixel $1'
}



while true; do
	clear
    choice=$(echo -e "󰸉  Wallpaper\n󰔎  Theme\n󰛖  Font Size\n󰎟  Notifications\n󱁐  Gaps\n  Window Borders\n󰌍  Back" | fzf --layout=reverse --prompt="  > " --height=50% )
    case $choice in
        *Wallpaper*) fzf-wallpaper-picker-window ;;
        *Theme*) fzf-theme-switch-menu ;;
        *Font*) fzf-font-size ;;
        *Notifications*) fzf-notifications-menu ;;
        *Borders*) i3_borders_menu ;;
        *Gaps*) i3_gaps_menu ;;
        *) break ;;
    esac
done
